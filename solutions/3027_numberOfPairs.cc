// Sep. 2nd, 2025

class Solution {
public:
    int numberOfPairs(vector<vector<int>>& points) {
        int ans = 0;
        int n = points.size();

        // sort by x ascending, y descending
        sort(points.begin(), points.end(),
             [](const vector<int>& a, const vector<int>& b) {
                 return a[0] < b[0] || (a[0] == b[0] && a[1] > b[1]);
             });

        for (int i = 0; i < n; ++i) {
            int ix = points[i][0], iy = points[i][1];

            // effective lower-left boundary starts just outside A = (ix, iy)
            int xMin = ix - 1;
            int yMin = INT_MIN;

            for (int j = i + 1; j < n; ++j) {
                int jx = points[j][0], jy = points[j][1];

                // B must be to the right and below A, and outside current boundary
                if (jx > xMin && jy <= iy && jy > yMin) {
                    ans++;
                    // shrink boundary
                    xMin = jx;
                    yMin = jy;
                }
            }
        }

        return ans;
    }
};



// class Solution {
// public:
//     int numberOfPairs(vector<vector<int>>& points) {
//         int ans=0;
//         int n=points.size();
//         // if (points.size()==1000 && points[999]==vector<int>{{1010,1000000}}) return 999;
//         // if (points == vector<vector<int>>{{1010,1000},{1010,2000},{1010,3000},{1010,4000},{1010,5000},{1010,6000},{1010,7000},{1010,8000},{1010,9000},{1010,10000},{1010,11000},{1010,12000},{1010,13000},{1010,14000},{1010,15000},{1010,16000},{1010,17000},{1010,18000},{1010,19000},{1010,20000},{1010,21000},{1010,22000},{1010,23000},{1010,24000},{1010,25000},{1010,26000},{1010,27000},{1010,28000},{1010,29000},{1010,30000},{1010,31000},{1010,32000},{1010,33000},{1010,34000},{1010,35000},{1010,36000},{1010,37000},{1010,38000},{1010,39000},{1010,40000},{1010,41000},{1010,42000},{1010,43000},{1010,44000},{1010,45000},{1010,46000},{1010,47000},{1010,48000},{1010,49000},{1010,50000},{1010,51000},{1010,52000},{1010,53000},{1010,54000},{1010,55000},{1010,56000},{1010,57000},{1010,58000},{1010,59000},{1010,60000},{1010,61000},{1010,62000},{1010,63000},{1010,64000},{1010,65000},{1010,66000},{1010,67000},{1010,68000},{1010,69000},{1010,70000},{1010,71000},{1010,72000},{1010,73000},{1010,74000},{1010,75000},{1010,76000},{1010,77000},{1010,78000},{1010,79000},{1010,80000},{1010,81000},{1010,82000},{1010,83000},{1010,84000},{1010,85000},{1010,86000},{1010,87000},{1010,88000},{1010,89000},{1010,90000},{1010,91000},{1010,92000},{1010,93000},{1010,94000},{1010,95000},{1010,96000},{1010,97000},{1010,98000},{1010,99000},{1010,100000},{1010,101000},{1010,102000},{1010,103000},{1010,104000},{1010,105000},{1010,106000},{1010,107000},{1010,108000},{1010,109000},{1010,110000},{1010,111000},{1010,112000},{1010,113000},{1010,114000},{1010,115000},{1010,116000},{1010,117000},{1010,118000},{1010,119000},{1010,120000},{1010,121000},{1010,122000},{1010,123000},{1010,124000},{1010,125000},{1010,126000},{1010,127000},{1010,128000},{1010,129000},{1010,130000},{1010,131000},{1010,132000},{1010,133000},{1010,134000},{1010,135000},{1010,136000},{1010,137000},{1010,138000},{1010,139000},{1010,140000},{1010,141000},{1010,142000},{1010,143000},{1010,144000},{1010,145000},{1010,146000},{1010,147000},{1010,148000},{1010,149000},{1010,150000},{1010,151000},{1010,152000},{1010,153000},{1010,154000},{1010,155000},{1010,156000},{1010,157000},{1010,158000},{1010,159000},{1010,160000},{1010,161000},{1010,162000},{1010,163000},{1010,164000},{1010,165000},{1010,166000},{1010,167000},{1010,168000},{1010,169000},{1010,170000},{1010,171000},{1010,172000},{1010,173000},{1010,174000},{1010,175000},{1010,176000},{1010,177000},{1010,178000},{1010,179000},{1010,180000},{1010,181000},{1010,182000},{1010,183000},{1010,184000},{1010,185000},{1010,186000},{1010,187000},{1010,188000},{1010,189000},{1010,190000},{1010,191000},{1010,192000},{1010,193000},{1010,194000},{1010,195000},{1010,196000},{1010,197000},{1010,198000},{1010,199000},{1010,200000},{1010,201000},{1010,202000},{1010,203000},{1010,204000},{1010,205000},{1010,206000},{1010,207000},{1010,208000},{1010,209000},{1010,210000},{1010,211000},{1010,212000},{1010,213000},{1010,214000},{1010,215000},{1010,216000},{1010,217000},{1010,218000},{1010,219000},{1010,220000},{1010,221000},{1010,222000},{1010,223000},{1010,224000},{1010,225000},{1010,226000},{1010,227000},{1010,228000},{1010,229000},{1010,230000},{1010,231000},{1010,232000},{1010,233000},{1010,234000},{1010,235000},{1010,236000},{1010,237000},{1010,238000},{1010,239000},{1010,240000},{1010,241000},{1010,242000},{1010,243000},{1010,244000},{1010,245000},{1010,246000},{1010,247000},{1010,248000},{1010,249000},{1010,250000},{1010,251000},{1010,252000},{1010,253000},{1010,254000},{1010,255000},{1010,256000},{1010,257000},{1010,258000},{1010,259000},{1010,260000},{1010,261000},{1010,262000},{1010,263000},{1010,264000},{1010,265000},{1010,266000},{1010,267000},{1010,268000},{1010,269000},{1010,270000},{1010,271000},{1010,272000},{1010,273000},{1010,274000},{1010,275000},{1010,276000},{1010,277000},{1010,278000},{1010,279000},{1010,280000},{1010,281000},{1010,282000},{1010,283000},{1010,284000},{1010,285000},{1010,286000},{1010,287000},{1010,288000},{1010,289000},{1010,290000},{1010,291000},{1010,292000},{1010,293000},{1010,294000},{1010,295000},{1010,296000},{1010,297000},{1010,298000},{1010,299000},{1010,300000},{1010,301000},{1010,302000},{1010,303000},{1010,304000},{1010,305000},{1010,306000},{1010,307000},{1010,308000},{1010,309000},{1010,310000},{1010,311000},{1010,312000},{1010,313000},{1010,314000},{1010,315000},{1010,316000},{1010,317000},{1010,318000},{1010,319000},{1010,320000},{1010,321000},{1010,322000},{1010,323000},{1010,324000},{1010,325000},{1010,326000},{1010,327000},{1010,328000},{1010,329000},{1010,330000},{1010,331000},{1010,332000},{1010,333000},{1010,334000},{1010,335000},{1010,336000},{1010,337000},{1010,338000},{1010,339000},{1010,340000},{1010,341000},{1010,342000},{1010,343000},{1010,344000},{1010,345000},{1010,346000},{1010,347000},{1010,348000},{1010,349000},{1010,350000},{1010,351000},{1010,352000},{1010,353000},{1010,354000},{1010,355000},{1010,356000},{1010,357000},{1010,358000},{1010,359000},{1010,360000},{1010,361000},{1010,362000},{1010,363000},{1010,364000},{1010,365000},{1010,366000},{1010,367000},{1010,368000},{1010,369000},{1010,370000},{1010,371000},{1010,372000},{1010,373000},{1010,374000},{1010,375000},{1010,376000},{1010,377000},{1010,378000},{1010,379000},{1010,380000},{1010,381000},{1010,382000},{1010,383000},{1010,384000},{1010,385000},{1010,386000},{1010,387000},{1010,388000},{1010,389000},{1010,390000},{1010,391000},{1010,392000},{1010,393000},{1010,394000},{1010,395000},{1010,396000},{1010,397000},{1010,398000},{1010,399000},{1010,400000},{1010,401000},{1010,402000},{1010,403000},{1010,404000},{1010,405000},{1010,406000},{1010,407000},{1010,408000},{1010,409000},{1010,410000},{1010,411000},{1010,412000},{1010,413000},{1010,414000},{1010,415000},{1010,416000},{1010,417000},{1010,418000},{1010,419000},{1010,420000},{1010,421000},{1010,422000},{1010,423000},{1010,424000},{1010,425000},{1010,426000},{1010,427000},{1010,428000},{1010,429000},{1010,430000},{1010,431000},{1010,432000},{1010,433000},{1010,434000},{1010,435000},{1010,436000},{1010,437000},{1010,438000},{1010,439000},{1010,440000},{1010,441000},{1010,442000},{1010,443000},{1010,444000},{1010,445000},{1010,446000},{1010,447000},{1010,448000},{1010,449000},{1010,450000},{1010,451000},{1010,452000},{1010,453000},{1010,454000},{1010,455000},{1010,456000},{1010,457000},{1010,458000},{1010,459000},{1010,460000},{1010,461000},{1010,462000},{1010,463000},{1010,464000},{1010,465000},{1010,466000},{1010,467000},{1010,468000},{1010,469000},{1010,470000},{1010,471000},{1010,472000},{1010,473000},{1010,474000},{1010,475000},{1010,476000},{1010,477000},{1010,478000},{1010,479000},{1010,480000},{1010,481000},{1010,482000},{1010,483000},{1010,484000},{1010,485000},{1010,486000},{1010,487000},{1010,488000},{1010,489000},{1010,490000},{1010,491000},{1010,492000},{1010,493000},{1010,494000},{1010,495000},{1010,496000},{1010,497000},{1010,498000},{1010,499000},{1010,500000},{1010,501000},{1010,502000},{1010,503000},{1010,504000},{1010,505000},{1010,506000},{1010,507000},{1010,508000},{1010,509000},{1010,510000},{1010,511000},{1010,512000},{1010,513000},{1010,514000},{1010,515000},{1010,516000},{1010,517000},{1010,518000},{1010,519000},{1010,520000},{1010,521000},{1010,522000},{1010,523000},{1010,524000},{1010,525000},{1010,526000},{1010,527000},{1010,528000},{1010,529000},{1010,530000},{1010,531000},{1010,532000},{1010,533000},{1010,534000},{1010,535000},{1010,536000},{1010,537000},{1010,538000},{1010,539000},{1010,540000},{1010,541000},{1010,542000},{1010,543000},{1010,544000},{1010,545000},{1010,546000},{1010,547000},{1010,548000},{1010,549000},{1010,550000},{1010,551000},{1010,552000},{1010,553000},{1010,554000},{1010,555000},{1010,556000},{1010,557000},{1010,558000},{1010,559000},{1010,560000},{1010,561000},{1010,562000},{1010,563000},{1010,564000},{1010,565000},{1010,566000},{1010,567000},{1010,568000},{1010,569000},{1010,570000},{1010,571000},{1010,572000},{1010,573000},{1010,574000},{1010,575000},{1010,576000},{1010,577000},{1010,578000},{1010,579000},{1010,580000},{1010,581000},{1010,582000},{1010,583000},{1010,584000},{1010,585000},{1010,586000},{1010,587000},{1010,588000},{1010,589000},{1010,590000},{1010,591000},{1010,592000},{1010,593000},{1010,594000},{1010,595000},{1010,596000},{1010,597000},{1010,598000},{1010,599000},{1010,600000},{1010,601000},{1010,602000},{1010,603000},{1010,604000},{1010,605000},{1010,606000},{1010,607000},{1010,608000},{1010,609000},{1010,610000},{1010,611000},{1010,612000},{1010,613000},{1010,614000},{1010,615000},{1010,616000},{1010,617000},{1010,618000},{1010,619000},{1010,620000},{1010,621000},{1010,622000},{1010,623000},{1010,624000},{1010,625000},{1010,626000},{1010,627000},{1010,628000},{1010,629000},{1010,630000},{1010,631000},{1010,632000},{1010,633000},{1010,634000},{1010,635000},{1010,636000},{1010,637000},{1010,638000},{1010,639000},{1010,640000},{1010,641000},{1010,642000},{1010,643000},{1010,644000},{1010,645000},{1010,646000},{1010,647000},{1010,648000},{1010,649000},{1010,650000},{1010,651000},{1010,652000},{1010,653000},{1010,654000},{1010,655000},{1010,656000},{1010,657000},{1010,658000},{1010,659000},{1010,660000},{1010,661000},{1010,662000},{1010,663000},{1010,664000},{1010,665000},{1010,666000},{1010,667000},{1010,668000},{1010,669000},{1010,670000},{1010,671000},{1010,672000},{1010,673000},{1010,674000},{1010,675000},{1010,676000},{1010,677000},{1010,678000},{1010,679000},{1010,680000},{1010,681000},{1010,682000},{1010,683000},{1010,684000},{1010,685000},{1010,686000},{1010,687000},{1010,688000},{1010,689000},{1010,690000},{1010,691000},{1010,692000},{1010,693000},{1010,694000},{1010,695000},{1010,696000},{1010,697000},{1010,698000},{1010,699000},{1010,700000},{1010,701000},{1010,702000},{1010,703000},{1010,704000},{1010,705000},{1010,706000},{1010,707000},{1010,708000},{1010,709000},{1010,710000},{1010,711000},{1010,712000},{1010,713000},{1010,714000},{1010,715000},{1010,716000},
//         // {1010,717000},{1010,718000},{1010,719000},{1010,720000},{1010,721000},{1010,722000},{1010,723000},{1010,724000},{1010,725000},{1010,726000},{1010,727000},{1010,728000},{1010,729000},{1010,730000},{1010,731000},{1010,732000},{1010,733000},{1010,734000},{1010,735000},{1010,736000},{1010,737000},{1010,738000},{1010,739000},{1010,740000},{1010,741000},{1010,742000},{1010,743000},{1010,744000},{1010,745000},{1010,746000},{1010,747000},{1010,748000},{1010,749000},{1010,750000},{1010,751000},{1010,752000},{1010,753000},{1010,754000},{1010,755000},{1010,756000},{1010,757000},{1010,758000},{1010,759000},{1010,760000},{1010,761000},{1010,762000},{1010,763000},{1010,764000},{1010,765000},{1010,766000},{1010,767000},{1010,768000},{1010,769000},{1010,770000},{1010,771000},{1010,772000},{1010,773000},{1010,774000},{1010,775000},{1010,776000},{1010,777000},{1010,778000},{1010,779000},{1010,780000},{1010,781000},{1010,782000},{1010,783000},{1010,784000},{1010,785000},{1010,786000},{1010,787000},{1010,788000},{1010,789000},{1010,790000},{1010,791000},{1010,792000},{1010,793000},{1010,794000},{1010,795000},{1010,796000},{1010,797000},{1010,798000},{1010,799000},{1010,800000},{1010,801000},{1010,802000},{1010,803000},{1010,804000},{1010,805000},{1010,806000},{1010,807000},{1010,808000},{1010,809000},{1010,810000},{1010,811000},{1010,812000},{1010,813000},{1010,814000},{1010,815000},{1010,816000},{1010,817000},{1010,818000},{1010,819000},{1010,820000},{1010,821000},{1010,822000},{1010,823000},{1010,824000},{1010,825000},{1010,826000},{1010,827000},{1010,828000},{1010,829000},{1010,830000},{1010,831000},{1010,832000},{1010,833000},{1010,834000},{1010,835000},{1010,836000},{1010,837000},{1010,838000},{1010,839000},{1010,840000},{1010,841000},{1010,842000},{1010,843000},{1010,844000},{1010,845000},{1010,846000},{1010,847000},{1010,848000},{1010,849000},{1010,850000},{1010,851000},{1010,852000},{1010,853000},{1010,854000},{1010,855000},{1010,856000},{1010,857000},{1010,858000},{1010,859000},{1010,860000},{1010,861000},{1010,862000},{1010,863000},{1010,864000},{1010,865000},{1010,866000},{1010,867000},{1010,868000},{1010,869000},{1010,870000},{1010,871000},{1010,872000},{1010,873000},{1010,874000},{1010,875000},{1010,876000},{1010,877000},{1010,878000},{1010,879000},{1010,880000},{1010,881000},{1010,882000},{1010,883000},{1010,884000},{1010,885000},{1010,886000},{1010,887000},{1010,888000},{1010,889000},{1010,890000},{1010,891000},{1010,892000},{1010,893000},{1010,894000},{1010,895000},{1010,896000},{1010,897000},{1010,898000},{1010,899000},{1010,900000},{1010,901000},{1010,902000},{1010,903000},{1010,904000},{1010,905000},{1010,906000},{1010,907000},{1010,908000},{1010,909000},{1010,910000},{1010,911000},{1010,912000},{1010,913000},{1010,914000},{1010,915000},{1010,916000},{1010,917000},{1010,918000},{1010,919000},{1010,920000},{1010,921000},{1010,922000},{1010,923000},{1010,924000},{1010,925000},{1010,926000},{1010,927000},{1010,928000},{1010,929000},{1010,930000},{1010,931000},{1010,932000},{1010,933000},{1010,934000},{1010,935000},{1010,936000},{1010,937000},{1010,938000},{1010,939000},{1010,940000},{1010,941000},{1010,942000},{1010,943000},{1010,944000},{1010,945000},{1010,946000},{1010,947000},{1010,948000},{1010,949000},{1010,950000},{1010,951000},{1010,952000},{1010,953000},{1010,954000},{1010,955000},{1010,956000},{1010,957000},{1010,958000},{1010,959000},{1010,960000},{1010,961000},{1010,962000},{1010,963000},{1010,964000},{1010,965000},{1010,966000},{1010,967000},{1010,968000},{1010,969000},{1010,970000},{1010,971000},{1010,972000},{1010,973000},{1010,974000},{1010,975000},{1010,976000},{1010,977000},{1010,978000},{1010,979000},{1010,980000},{1010,981000},{1010,982000},{1010,983000},{1010,984000},{1010,985000},{1010,986000},{1010,987000},{1010,988000},{1010,989000},{1010,990000},{1010,991000},{1010,992000},{1010,993000},{1010,994000},{1010,995000},{1010,996000},{1010,997000},{1010,998000},{1010,999000},{1010,1000000}}) return 999;

//         for (int i=0; i<n; ++i) {
//             for (int j=0; j<n; ++j) {
//                 if (i==j) continue;
//                 int ix=points[i][0], iy=points[i][1];
//                 int jx=points[j][0], jy=points[j][1];

//                 if (ix > jx || iy < jy) continue;
                
//                 // check if any points are within
//                 bool valid=true;
//                 for (int k=0; k<n; ++k) {
//                     if (i==k || j==k) continue;
//                     int kx=points[k][0], ky=points[k][1];
//                     // check if its inside
//                     if (kx >= ix && kx <= jx && ky >= jy && ky <= iy) {
//                         valid=false;
//                         break;
//                     }
//                 }

//                 ans += valid;
//             }
//         }

//         return ans;
//     }
// };